<% @apartment_results_hash.each do |apartment_id, apartments| %>
	<% apartments.each do |apartment| %>
		<%= apt_sum_container_detail(apartment) %>
	<% end %>
<% end %>

<script type="text/javascript">
	$().ready(function(){
		var addresses = $('div[data-address]');
		addresses.each(function(index, elm) {
			var address = $(this).attr("data-address");
			var apartment_id = $(this).attr("data-apartment-id");
			console.log(geocoder);
			geocoder.geocode( { 'address': address}, function(results, status) {
				console.log(status);
				if (status == google.maps.GeocoderStatus.OK) {
					var lat = results[0].geometry.location.lat();
					var lng = results[0].geometry.location.lng();
					var latlng = new google.maps.LatLng(lat, lng);
					console.log(latlng);
				    var myOptions = {
						zoom: 15,
						center: latlng,
						mapTypeId: google.maps.MapTypeId.ROADMAP,
						mapTypeControl: false
				    };
				    var map = new google.maps.Map(document.getElementById("apt_"+apartment_id+"_map"), myOptions);
					
					var marker = new google.maps.Marker({
					    position: latlng
					});
					// add to map
					marker.setMap(map);
				}
			});
		})
	})
</script>